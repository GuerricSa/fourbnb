<div class = "container">

  <div class = "show-info">
    <h2><%= @oven.title %></h1>

    <div class ="d-flex">
      Rating : <%= @oven.price%>
      Adresse : <%= @oven.address %>
    </div>
  </div>


    <% if @oven.photos.length >= 5 %>
      <%= render "ovens/five_photos" %>
    <% elsif @oven.photos.length >= 1 && @oven.photos.length < 5 %>
      <%= render "ovens/one_photo" %>
    <% end %>


  <div id="div-text" class="d-flex justify-content-between mt-3" data-controller="toggle">

    <div id= "description" class="mt-3" data-toggle-target="togglableElementbis">
      <p>Marque : <%= @oven.brand %></p>
      <p>Description : <%= @oven.description %></p>
      <p>Proposé par : <%= @oven.user.first_name %></p>
    </div>

      <div id="card-booking" class="card">
        <div class="card-body" data-controller="total-price">

          <div data-toggle-target="togglableElement">
            <h5 class="card-title"> <strong data-total-price-target="price"><%= @oven.price %></strong> €/h </h5>
            <div>
              <p> rating/commentaires</p>
            </div>
            <a type="button" class="btn-cta p-2 mt-4" data-action="click->toggle#move" data-toggle-target="togglableElementButton">Réserver</a>

          </div>

          <div class="d-none" data-toggle-target="togglableElementForm" data-controller="button">
            <%= render "layouts/form_booking", booking: @booking %>
            <button class="cross-button position-absolute top-0 end-0" data-action="click->toggle#move"><i class="fa-solid fa-x"></i></button>
          </div>

        </div>
      </div>

  </div>

  <div class = "mt-3 d-flex justify-content-end">
    <% if current_user == @oven.user %>
      <button type="button" class="btn btn-outline-secondary"><%= link_to "Modifier", edit_oven_path(@oven) %></button>

      <button type="button" class="btn btn-outline-secondary"><%= link_to "Supprimer", oven_path(@oven), data: {turbo_method: :delete, turbo_confirm: "Es-tu sûr.e ?"} %></button>
      <% end %>
  </div>

  <h5>Evaluations</h5>
  <ul class="list-group review">
    <% @oven.reviews.each do |review| %>
      <li class="list-group-item">
        <% if review.booking.user && review.booking.user.avatar %>
          <%= cl_image_tag review.booking.user.avatar.key, class: "card-trip-user avatar-bordered", crop: "fill", fetch_format: :auto %>
        <% else %>
          <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-trip-user avatar-bordered" />
        <% end %>
        <%= review.booking.user.first_name %>
        <%= review.content %>
      </li>
    <% end %>
  </ul>

</div>
